<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#3367D6"/>
  <link rel="apple-touch-icon" href="/icons-192.png">
  <link rel="manifest" href="/manifest.json">
  


  <meta name="generator" content="Hexo 6.3.0">

  
    <meta name="description" content="仰天大笑出门去，我辈岂是蓬蒿人">
  

  

  
    <meta name="author" content="阿巴">
  

  

  

  <title>sql注入学习笔记 | 阿巴</title>

  

  
    <link rel="shortcut icon" href="/favicon.ico">
  

  

  

  
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
  <div class="root-container">
    
<!-- header container -->
<header class="header-container post">
  
    <div class="post-image" style="background-image: url(https://qiniu.sukoshi.xyz/src/images/68686407_p0.jpg)"></div>
  

  <!-- navbar -->
<nav class="navbar">
  <div class="navbar-content">
    <!-- logo -->
    <div class="navbar-logo">
      <a href="/">
        
          阿巴
        
      </a>
    </div>
    <!-- link -->
    <div class="navbar-link">
      <div class="navbar-btn">
        <div></div>
        <div></div>
        <div></div>
      </div>
      <ul class="navbar-list">
        
          <li class="navbar-list-item"><a href="/">首页</a></li>
        
          <li class="navbar-list-item"><a href="/links">友链</a></li>
        
          <li class="navbar-list-item"><a href="/about">关于</a></li>
        
      </ul>
    </div>
  </div>
</nav>

  
  

  
  

  
  

  
  

  
  
    <div class="header-content">
      <div class="post-text layout-block">
        <div class="layout-margin">
          <h1 class="title-wrap">sql注入学习笔记</h1>
          <h2 class="title-sub-wrap">
            <strong>阿巴</strong>
            <span>发布于</span>
            <time  class="article-date" datetime="2023-07-16T06:35:17.000Z" itemprop="datePublished">2023-07-16</time>
          </h2>
          
            <h2 class="title-sub-wrap new-date">
              <span>最后更新于</span>
              <time  class="article-updated" datetime="2023-07-19T13:29:29.706Z" itemprop="dateUpdated">2023-07-19</time>
            </h2>
          
          
          <ul class="wrap-list dark">
  
</ul>
          <ul class="wrap-list dark">
  
    <li><a href="/tags/web%E5%AE%89%E5%85%A8/">🏷️ web安全</a></li>
  
</ul>
        </div>
      </div>
    </div>
  

  
  
  
</header>

    <!-- 文章 -->

<!-- 文章内容 -->
<div class="body-container">
  <article class="content-container layout-block post-container">
    <div class="article-info">
      
      
      
      
      <section class="article-entry markdown-body layout-margin content-padding--large soft-size--large soft-style--box">
        <span id="more"></span>

<h1 id="PHP特性"><a href="#PHP特性" class="headerlink" title="PHP特性"></a>PHP特性</h1><p>php松散比较表：<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/types.comparisons.php">PHP: PHP 类型比较表 - Manual</a></p>
<h2 id="0-基本弱类型"><a href="#0-基本弱类型" class="headerlink" title="0.基本弱类型"></a>0.基本弱类型</h2><ol>
<li><p>数组比较：在php手册中写道，当数组(array)与任何非数组进行比较时，数组总是最大的，所以有以下结果“</p>
<pre class="line-numbers language-none"><code class="language-none">var_dump([]&gt;0); &#x2F;&#x2F;bool(true)
var_dump([]&gt;9999); &#x2F;&#x2F;bool(true)
var_dump([]&gt;&#39;a&#39;); &#x2F;&#x2F;bool(true) #数组大于字符串
var_dump([[]]&gt;[]); &#x2F;&#x2F;bool(true) #自然二位数组大于一维数组<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>bool类型的true比较* bool类型的true跟任意字符可以弱类型相等</p>
</li>
</ol>
   <pre class="line-numbers language-none"><code class="language-none">var_dump(true &#x3D;&#x3D; &#39;a&#39;); &#x2F;&#x2F;bool(true)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="3">
<li><code>==</code>与<code>===</code>的区别：</li>
</ol>
<ul>
<li><p>在进行比较时，向将两边的类型转化成相同类型再进行比较，如果涉及到数值内容的字符串，则字符串会被转化成数值（通过<code>intval()</code>函数），并且按照数值大小进行比较（<code>&gt;</code>、<code>&lt;</code>同理）。 <strong>补充</strong>： - “根据php手册中所讲，字符串的开头决定了它转换后的值，如果该字符串以合法的数值开始，则使用该合法数值，否则其值为0” - 如果字符创中没有包含<code>.</code>、<code>e</code>、<code>E</code>并且其数值在整形范围内，该字符被当做int来取值，其他所有情况都被作为float来取值。 - 0e开头的字符串被认为是科学技术计数法，且0e开头的数值为0 - 当一个整形与其他类型进行比较时，会先把其他类型进行<code>intval()</code>后再进行比较 所以有如下结果：</p>
<pre class="line-numbers language-none"><code class="language-none">var_dump(1 &#x3D;&#x3D; &#39;1&#39;); &#x2F;&#x2F;bool(true)
var_dump(1 &#x3D;&#x3D; &#39;1a&#39;); &#x2F;&#x2F;bool(true)
var_dump(0 &#x3D;&#x3D; &#39;0exxx&#39;); &#x2F;&#x2F;bool(true)
var_dump(0 &#x3D;&#x3D; &#39;a1&#39;); &#x2F;&#x2F;bool(true)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<ol start="4">
<li><code>strcmp()</code>、<code>strcasecmp()</code>函数* <code>strcmp(string1, string2)</code>、<code>strcasecmp(string1, string2)</code> 比较两个字</li>
</ol>
<p>   符串，前者不区分大小写，后者区分大小写。若<code>string1 &gt; string2</code>，返回<code>&gt; 0</code>；若<code>string1 &lt; string2</code>，返回&#96;&lt;</p>
<p>   0<code>;若</code>string1 &#x3D; string2<code>，返回</code>0<code>。然而该函数无法处理数组，当出现数组时，返回</code>null&#96;。(下例中@表示忽略警</p>
<p>   告)：</p>
   <pre class="line-numbers language-none"><code class="language-none">var_dump(@strcmp([],1));                &#x2F;&#x2F;NULL
var_dump(@strcmp([],&#39;flag&#39;) &#x3D;&#x3D; 0);    &#x2F;&#x2F;bool(true)
var_dump(@strcmp([],&#39;flag&#39;) &#x3D;&#x3D;&#x3D; 0);    &#x2F;&#x2F;bool(false)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ol start="5">
<li><p><code>switch()</code>函数* switch()语句用于根据多个不同的条件执行不同的动作。</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$n</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'2a'</span><span class="token punctuation">;</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token variable">$n</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
          <span class="token keyword">echo</span> <span class="token string single-quoted-string">'yes'</span><span class="token punctuation">;</span>          
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token punctuation">:</span>
          <span class="token keyword">echo</span> <span class="token string single-quoted-string">'no'</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>此例中，为数值类型的case，switch会将参数转换为数值（此处可理解为通过&#x3D;&#x3D;进行比较。）。</p>
</li>
</ol>
<h2 id="1-元字符"><a href="#1-元字符" class="headerlink" title="1.元字符"></a>1.元字符</h2><p><img src="/images/PHP%E7%89%B9%E6%80%A7/php%E7%89%B9%E6%80%A7.png"></p>
<p>关于正则表达式的详细介绍见：<a target="_blank" rel="noopener" href="https://www.runoob.com/regexp/regexp-metachar.html">正则表达式 – 元字符 | 菜鸟教程 (runoob.com)</a>。</p>
<h2 id="2-模式修正符："><a href="#2-模式修正符：" class="headerlink" title="2.模式修正符："></a>2.模式修正符：</h2><p><img src="/images/PHP%E7%89%B9%E6%80%A7/php%E7%89%B9%E6%80%A71.png"></p>
<p>对于模式修正符的介绍与使用见：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_54646993/article/details/116097222%E3%80%82">https://blog.csdn.net/weixin_54646993/article/details/116097222。</a></p>
<h2 id="3-preg-match-函数"><a href="#3-preg-match-函数" class="headerlink" title="3.preg_match()函数"></a>3.preg_match()函数</h2><p>该函数用于执行一个正则表达式匹配，语法如下：</p>
<pre class="line-numbers language-none"><code class="language-none">int preg_match ( string $pattern , string $subject [, array &amp;$matches [, int $flags &#x3D; 0 [, int $offset &#x3D; 0 ]]] )<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>参数说明：</p>
<ul>
<li>$pattern: 要搜索的模式，字符串形式。</li>
<li>$subject: 输入字符串。</li>
<li>$matches: 如果提供了参数matches，它将被填充为搜索结果。 $matches[0]将包含完整模式匹配到的文本， $matches[1] 将包含第一个捕获子组匹配到的文本，以此类推。</li>
<li>$flags：flags 可以被设置为以下标记值：<ol>
<li>PREG_OFFSET_CAPTURE: 如果传递了这个标记，对于每一个出现的匹配返回时会附加字符串偏移量(相对于目标字符串的)。 注意：这会改变填充到matches参数的数组，使其每个元素成为一个由 第0个元素是匹配到的字符串，第1个元素是该匹配字符串 在目标字符串subject中的偏移量。</li>
</ol>
</li>
<li>offset: 通常，搜索从目标字符串的开始位置开始。可选参数 offset 用于 指定从目标字符串的某个未知开始搜索(单位是字节)。</li>
</ul>
<p>返回 pattern 的匹配次数。 它的值将是 0 次（不匹配）或 1 次，因为 preg_match() 在第一次匹配后 将会停止搜索。preg_match_all() 不同于此，它会一直搜索subject 直到到达结尾。 如果发生错误preg_match()返回 FALSE</p>
<p><strong>绕过方式</strong></p>
<ul>
<li><p>数组绕过：该函数只能处理字符串，当传入的字符串为数组时会返回false；如下例</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/[0-9]/"</span><span class="token punctuation">,</span> <span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>当我们传入的字符串为 <code>num[]=1</code> 时便可以成功绕过。</p>
</li>
<li><p>换行绕过：在部分的情况下，换行可以不被匹配到，如：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^php$/im'</span><span class="token punctuation">,</span> <span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/^php$/i'</span><span class="token punctuation">,</span> <span class="token variable">$a</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'hacker'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>当我们传入的值为 <code>a=%0aphp</code> 时，关键字php就不会被匹配到</p>
</li>
<li><p>最大回溯次数绕过：PHP 为了防止正则表达式的拒绝服务攻击（reDOS），给 pcre 设定了一个回溯次数上限 pcre.backtrack_limit<br>回溯次数上限默认是 100 万。如果回溯次数超过了 100 万，preg_match 将不再返回非 1 和 0，而是 false。</p>
<p>基于这个特性，我们可以编写脚本来使它超过他的默认上限；如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token variable">$f</span> <span class="token operator">=</span> <span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'f'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'/.+?ctfshow/is'</span><span class="token punctuation">,</span> <span class="token variable">$f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bye!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">stripos</span><span class="token punctuation">(</span><span class="token variable">$f</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'ctfshow'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'bye!!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>对于这段代码，我们可以有一下脚本：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests
url<span class="token operator">=</span><span class="token string">"http://15bdcf89-9e10-4205-b3b4-6b3a0e45651a.chall.ctf.show:8080/"</span>
data<span class="token operator">=</span><span class="token punctuation">&#123;</span>
	<span class="token string">'f'</span><span class="token punctuation">:</span><span class="token string">'very'</span><span class="token operator">*</span><span class="token number">250000</span><span class="token operator">+</span><span class="token string">'ctfshow'</span>
<span class="token punctuation">&#125;</span>
r<span class="token operator">=</span>requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span>data<span class="token operator">=</span>data<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>便可以成功绕过。</p>
</li>
</ul>
<h2 id="4-intval-函数"><a href="#4-intval-函数" class="headerlink" title="4.intval()函数"></a>4.intval()函数</h2><p>该函数用于获取变量的整数值，<strong>intval()</strong> 函数通过使用指定的进制 base 转换（默认是十进制），返回变量 var 的 integer 数值。 intval() 不能用于 object，否则会产生 E_NOTICE 错误并返回 1。语法如下：</p>
<p><code>int intval ( mixed $var [, int $base = 10 ] )</code></p>
<p>参数解释：</p>
<p>参数说明：</p>
<ul>
<li>$var：要转换成 integer 的数量值。</li>
<li>$base：转化所使用的进制。</li>
</ul>
<p>如果 base 是 0，通过检测 var 的格式来决定使用的进制：</p>
<ul>
<li>如果字符串包括了 “0x” (或 “0X”) 的前缀，使用 16 进制 (hex)；否则，</li>
<li>如果字符串以 “0” 开始，使用 8 进制(octal)；否则，</li>
<li>将使用 10 进制 (decimal)。</li>
</ul>
<p><strong>绕过方法</strong></p>
<ul>
<li><p>字符绕过：intval()而言，如果参数是字符串，则返回字符串中第一个不是数字的字符之前的数字串所代表的整数值。如果字符串第一个是‘-’，则从第二个开始算起。如下面的题：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token operator">==</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token number">.0</span>if<span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这个时候我们便可以在数字之后加一个字母，便可以成功绕过 <code>num=4467a</code> 便可以成功绕过。</p>
</li>
<li><p>科学计数法绕过：intval()int函数如果b a s e 为 0 则 base为0则base为0则var中存在字母的话遇到字母就停止读取 但是e这个字母比较特殊，可以在PHP中表示科学计数法。</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token operator">==</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个情况下，我们可以通过字母e来绕过；如<code>num=4476e1</code>便可以成功绕过。</p>
</li>
<li><p>进制转换绕过：通过对数字的进制转换，来进行绕过。以上面的代码例题为例，我们将4476改为八进制的10574，但是不能直接加，需要在前面加上0，下面是数字的格式:</p>
<p>0b?? : 二进制<br>0??? : 八进制<br>0X?? : 十六进制</p>
</li>
<li><p>小数点的绕过：加小数点改变数据类型，便可以成功绕过：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token operator">===</span><span class="token string double-quoted-string">"4476"</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/[a-z]/i"</span><span class="token punctuation">,</span> <span class="token variable">$num</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">strpos</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"no no no!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$num</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">===</span><span class="token number">4476</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token keyword">echo</span> <span class="token variable">$flag</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这道题在上边的基础上加了一个0的过滤，故无法用进制转换绕过，只能通过小数点，使得intval()转变为int()；所以我们传数字<code>num=4476.0</code></p>
</li>
<li><p>左移绕过：通过位运算符<code>&lt;&lt;</code>和<code>&gt;&gt;</code>，我们可以控制数的大小，用法如下：</p>
<ul>
<li><p>“&lt;&lt;” 左移运算符：将一个数的二进制表示向左移动指定的位数，右侧用零填充。移位后的数相当于乘以2的移动的位数次幂。</p>
<p>示例：</p>
<pre class="line-numbers language-none"><code class="language-none">$num &#x3D; 5;  &#x2F;&#x2F; 二进制表示为 00000101
$result &#x3D; $num &lt;&lt; 2;  &#x2F;&#x2F; 向左移动2位
echo $result;  &#x2F;&#x2F; 输出 20，相当于 5 * (2的2次幂) &#x3D; 20<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>“&gt;&gt;” 右移运算符：将一个数的二进制表示向右移动指定的位数，左侧用符号位填充（即对于正数用0填充，对于负数用1填充）。移位后的数相当于除以2的移动的位数次幂。</p>
<p>示例：</p>
<pre class="line-numbers language-none"><code class="language-none">$num &#x3D; 16;  &#x2F;&#x2F; 二进制表示为 00010000
$result &#x3D; $num &gt;&gt; 2;  &#x2F;&#x2F; 向右移动2位
echo $result;  &#x2F;&#x2F; 输出 4，相当于 16 &#x2F; (2的2次幂) &#x3D; 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p>如下例题：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment"># 包含数据库连接文件</span>
<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"config.php"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 判断get提交的参数id是否存在</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">preg_match</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"/or|\+/i"</span><span class="token punctuation">,</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"id error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment"># 判断id的值是否大于999</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">intval</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">999</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment"># id 大于 999 直接退出并返回错误</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"id error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        <span class="token comment"># id 小于 999 拼接sql语句</span>
        <span class="token variable">$sql</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"select * from article where id = <span class="token interpolation"><span class="token variable">$id</span></span> order by id limit 1 "</span><span class="token punctuation">;</span>
        <span class="token keyword">echo</span> <span class="token string double-quoted-string">"执行的sql为：<span class="token interpolation"><span class="token variable">$sql</span></span>&lt;br>"</span><span class="token punctuation">;</span>
        <span class="token comment"># 执行sql 语句</span>
        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$conn</span><span class="token operator">-></span><span class="token function">query</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment"># 判断有没有查询结果</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$result</span><span class="token operator">-></span><span class="token property">num_rows</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment"># 如果有结果，获取结果对象的值$row</span>
            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token variable">$row</span> <span class="token operator">=</span> <span class="token variable">$result</span><span class="token operator">-></span><span class="token function">fetch_assoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">echo</span> <span class="token string double-quoted-string">"id: "</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"id"</span><span class="token punctuation">]</span><span class="token operator">.</span> <span class="token string double-quoted-string">" - title: "</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"title"</span><span class="token punctuation">]</span><span class="token operator">.</span> <span class="token string double-quoted-string">" &lt;br>&lt;hr>"</span> <span class="token operator">.</span> <span class="token variable">$row</span><span class="token punctuation">[</span><span class="token string double-quoted-string">"content"</span><span class="token punctuation">]</span><span class="token operator">.</span> <span class="token string double-quoted-string">"&lt;br>"</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment"># 关闭数据库连接</span>
        <span class="token variable">$conn</span><span class="token operator">-></span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    
<span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
    <span class="token function">highlight_file</span><span class="token punctuation">(</span><span class="token constant">__FILE__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个题目当中，目标id&#x3D;1000，我们要绕过intval()函数，该函数使用前几种方法的值大小都不会改变，但由于该函数有<strong>intval()而言，如果参数是字符串，则返回字符串中第一个不是数字的字符之前的数字串所代表的整数值</strong>此条性质，我们便可以将<code>id=%0a125&lt;&lt;3</code>，此时，该函数读取到的数是123，但该数实际值却是1000，这样，便可以成功绕过。</p>
</li>
</ul>
<h2 id="5-strpos-函数"><a href="#5-strpos-函数" class="headerlink" title="5.strpos()函数"></a>5.strpos()函数</h2><p>此函数是查询某字符在字符串中第一次出现的位置，且区分大小写，语法格式如下：</p>
<p><code>strpos(string,find,start)</code></p>
<p>参数解释：string	必需。规定要搜索的字符串。find	必需。规定要查找的字符串。start	可选。规定在何处开始搜索。</p>
<table>
<thead>
<tr>
<th>返回值：</th>
<th>返回字符串在另一字符串中第一次出现的位置，如果没有找到字符串则返回 FALSE。<strong>注释：</strong>字符串位置从 0 开始，不是从 1 开始。</th>
</tr>
</thead>
<tbody><tr>
<td>PHP 版本：</td>
<td>4+</td>
</tr>
</tbody></table>
<p>相关函数：</p>
<pre class="line-numbers language-none"><code class="language-none">stripos() - 查找字符串在另一字符串中第一次出现的位置（不区分大小写）
strripos() - 查找字符串在另一字符串中最后一次出现的位置（不区分大小写）
strrpos() - 查找字符串在另一字符串中最后一次出现的位置（区分大小写）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><strong>绕过方法</strong></p>
<ul>
<li><p>数组绕过：strpos如果接收了数组作为参数，那么就会返回null。基于这个原理我们可以通过数组来绕过此函数，如下</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$flag</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"flag"</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">isset</span> <span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'ctf'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strpos</span> <span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'ctf'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'#biubiubiu'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token constant boolean">FALSE</span><span class="token punctuation">)</span>
        <span class="token keyword">die</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Flag: '</span><span class="token operator">.</span><span class="token variable">$flag</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token keyword">echo</span> <span class="token string single-quoted-string">'骚年，继续努力吧啊~'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>此时需要该函数的返回值不等于FALSE，故我们直接输入<code>?ctf[]</code>将该参数直接设为数组，该返回值为NULL，便可成功绕过。</p>
</li>
<li><p>根据逻辑关系直接绕过：这种情况出现较少，在遇到题目之后再做记录。</p>
</li>
</ul>
<h2 id="6-MD5和sha1-函数"><a href="#6-MD5和sha1-函数" class="headerlink" title="6.MD5和sha1()函数"></a>6.MD5和sha1()函数</h2><h3 id="md5"><a href="#md5" class="headerlink" title="md5"></a>md5</h3><p>该函数用于将一字符串进行md5编码后输出，语法格式如下：</p>
<p><code>md5(string,raw)</code></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>string</em></td>
<td align="left">必需。规定要计算的字符串。</td>
</tr>
<tr>
<td align="left"><em>raw</em></td>
<td align="left">可选。规定十六进制或二进制输出格式：TRUE - 原始 16 字符二进制格式FALSE - 默认。32 字符十六进制数</td>
</tr>
</tbody></table>
<p>返回值如下：</p>
<table>
<thead>
<tr>
<th>返回值：</th>
<th>如果成功则返回已计算的 MD5 散列，如果失败则返回 FALSE。</th>
</tr>
</thead>
<tbody><tr>
<td>PHP 版本：</td>
<td>4+</td>
</tr>
<tr>
<td>更新日志：</td>
<td>在 PHP 5.0 中，<em>raw</em> 参数变为可选的。</td>
</tr>
</tbody></table>
<p><strong>绕过方法</strong>：</p>
<ul>
<li><p>数组绕过：将需要我们传入的数据设置为数组，在此种情况下，会产生报错，但返回值为真：</p>
<p><img src="/images/PHP%E7%89%B9%E6%80%A7/md5%E6%95%B0%E7%BB%84%E7%BB%95%E8%BF%87.png"></p>
<p>在此题目当中，可以得到NULL&#x3D;&#x3D;NULL，便可以成功绕过。（注意：假如对参数进行了过滤，此种方法便不再可行。）</p>
</li>
<li><p>常规的0e绕过：”0e”绕过是指通过寻找特定输入，使其MD5值以”0e”开头，后跟一系列数字，同时该MD5值被解释为科学计数法中的0乘以10的指数，也就是成为<code>0=0</code>，便可以绕过。这可能导致验证代码中的类型转换错误，从而导致绕过某些安全检查；常见开头为0e的md5值的字符串有以下：</p>
<ul>
<li>QNKCDZO</li>
<li>240610708</li>
<li>s878926199a</li>
<li>s155964671a</li>
<li>s214587387a</li>
<li>s214587387a</li>
</ul>
<p>这些字符串的 md5 值都是 0e 开头，在 php 弱类型比较中判断为相等。（注意：此种方法仅适用弱比较情况，在强比较情况下不能使用）</p>
</li>
<li><p>md5碰撞绕过绕过：输入两个不同的哈希值，使其经转换过后的值相同，同样可以成功绕过。</p>
</li>
<li><p>MySQL注入绕过：ffifdyop 的MD5加密结果是 276f722736c95d99e921722cf9ed621c</p>
<p>经过MySQL编码后会变成’or’6xxx,使SQL恒成立,相当于万能密码,可以绕过md5()函数的加密</p>
</li>
</ul>
<h3 id="sha1-函数"><a href="#sha1-函数" class="headerlink" title="sha1()函数"></a>sha1()函数</h3><p>sha()函数大致与md5函数相同，同样无法处理数组，遇到数组会警告并返回NULL，0e同样可以绕过该函数，也同样可以MySQL注入，但与md5函数的不同；下列是sha1()函数的0e绕过的特殊数</p>
<pre class="line-numbers language-none"><code class="language-none">sha1(&#39;aaroZmOk&#39;) &#x2F;&#x2F;0e66507019969427134894567494305185566735
sha1(&#39;aaK1STfY&#39;) &#x2F;&#x2F;0e76658526655756207688271159624026011393
sha1(&#39;aaO8zKZF&#39;) &#x2F;&#x2F;0e89257456677279068558073954252716165668
sha1(&#39;aa3OFF9m&#39;) &#x2F;&#x2F;0e36977786278517984959260394024281014729<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>





<h2 id="7-file-put-contents-函数"><a href="#7-file-put-contents-函数" class="headerlink" title="7.file_put_contents()函数"></a>7.file_put_contents()函数</h2><p>该函数把一个字符串写入文件中。</p>
<p>该函数访问文件时，遵循以下规则：</p>
<ol>
<li>如果设置了 FILE_USE_INCLUDE_PATH，那么将检查 <em>filename</em> 副本的内置路径</li>
<li>如果文件不存在，将创建一个文件</li>
<li>打开文件</li>
<li>如果设置了 LOCK_EX，那么将锁定文件</li>
<li>如果设置了 FILE_APPEND，那么将移至文件末尾。否则，将会清除文件的内容</li>
<li>向文件中写入数据</li>
<li>关闭文件并对所有文件解锁</li>
</ol>
<p>如果成功，该函数将返回写入文件中的字符数。如果失败，则返回 False。语法如下：</p>
<p><code>int file_put_contents ( string $filename , mixed $data [, int $flags = 0 [, resource $context ]] )</code></p>
<p>参数如下：</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">filename</td>
<td align="center">必需。规定要写入数据的文件。如果文件不存在，则创建一个新文件。</td>
</tr>
<tr>
<td align="center">data</td>
<td align="center">必需。规定要写入文件的数据。可以是字符串、数组或数据流。</td>
</tr>
<tr>
<td align="center">flags</td>
<td align="center">可选。规定如何打开&#x2F;写入文件。可能的值：FILE_USE_INCLUDE_PATHFILE_APPENDLOCK_EX</td>
</tr>
<tr>
<td align="center">context</td>
<td align="center">可选。规定文件句柄的环境。context 是一套可以修改流的行为的选项。</td>
</tr>
</tbody></table>
<p>该函数访问文件时，遵循以下规则：</p>
<p>如果设置了 FILE_USE_INCLUDE_PATH，那么将检查 filename 副本的内置路径 如果文件不存在，将创建一个文件<br>打开文件 如果设置了 LOCK_EX，那么将锁定文件 如果设置了 FILE_APPEND，那么将移至文件末尾。否则，将会清除文件的内容<br>向文件中写入数据 关闭文件并对所有文件解锁 如果成功，该函数将返回写入文件中的字符数。如果失败，则返回 False。</p>
<h2 id="8-in-array-函数"><a href="#8-in-array-函数" class="headerlink" title="8.in_array()函数"></a>8.in_array()函数</h2><p>该函数搜索数组中是否存在指定的值。语法如下：</p>
<p><code>bool in_array ( mixed $needle , array $haystack [, bool $strict = FALSE ] )</code></p>
<p>参数解释：</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><em>needle</em></td>
<td align="center">必需。规定要在数组搜索的值。</td>
</tr>
<tr>
<td align="center"><em>haystack</em></td>
<td align="center">必需。规定要搜索的数组。</td>
</tr>
<tr>
<td align="center"><em>strict</em></td>
<td align="center">可选。如果该参数设置为 TRUE，则 in_array() 函数检查搜索的数据与数组的值的类型是否相同。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="center">返回值：</th>
<th align="center">如果在数组中找到值则返回 TRUE，否则返回 FALSE。</th>
</tr>
</thead>
<tbody><tr>
<td align="center">PHP 版本：</td>
<td align="center">4+</td>
</tr>
<tr>
<td align="center">更新日志</td>
<td align="center">自 PHP 4.2 起，search 参数可以是一个数组。</td>
</tr>
</tbody></table>
<p><strong>绕过方法</strong>：</p>
<p>在 <strong>$haystack</strong> 中搜索 <strong>$needle</strong> ，如果第三个参数 <strong>$strict</strong> 的值为 <strong>TRUE</strong> ，则 <strong>in_array()</strong> 函数会进行强检查，检查 <strong>$needle</strong> 的类型是否和 <strong>$haystack</strong> 中的相同。如果找到 <strong>$haystack</strong> ，则返回 <strong>TRUE</strong>，否则返回 <strong>FALSE</strong>。通过这个性质，我们便可以绕过部分情况：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword">class</span> <span class="token class-name-definition class-name">Challenge</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token constant">UPLOAD_DIRECTORY</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'./solutions/'</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token variable">$file</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token variable">$whitelist</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">file</span> <span class="token operator">=</span> <span class="token variable">$file</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">whitelist</span> <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__destruct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-></span><span class="token property">file</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">whitelist</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#123;</span>
            <span class="token function">move_uploaded_file</span><span class="token punctuation">(</span>
                <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">file</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tmp_name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token constant">UPLOAD_DIRECTORY</span> <span class="token operator">.</span> <span class="token variable">$this</span><span class="token operator">-></span><span class="token property">file</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token variable">$challenge</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Challenge</span><span class="token punctuation">(</span><span class="token variable">$_FILES</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'solution'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这段代码当中，由于该函数并未将第三个参数设置为 true ，这导致攻击者可以通过构造的文件名来绕过服务端的检测，例如文件名为 7shell.php 。因为PHP在使用 in_array() 函数判断时，会将 7shell.php 强制转换成数字7，而数字7在 range(1,24) 数组中，最终绕过 in_array() 函数判断，导致任意文件上传漏洞。（这里之所以会发生强制类型转换，是因为目标数组中的元素为数字类型）</p>
<h2 id="9-优先级"><a href="#9-优先级" class="headerlink" title="9.优先级"></a>9.优先级</h2><ul>
<li><p>符号：优先级情况如下图：</p>
<table>
<thead>
<tr>
<th align="center"><strong>优先级</strong></th>
<th align="center"><strong>结合方向</strong></th>
<th align="center"><strong>运算符</strong></th>
<th align="center"><strong>附加信息</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">1</td>
<td align="center">无结合</td>
<td align="center">clone、new</td>
<td align="center">clone 和 new</td>
</tr>
<tr>
<td align="center">2</td>
<td align="center">从右向左</td>
<td align="center">**</td>
<td align="center">算术运算符</td>
</tr>
<tr>
<td align="center">3</td>
<td align="center">从右向左</td>
<td align="center">++、–、~、(int)、(float)、(string)、(array)、(object)、(bool)、@</td>
<td align="center">类型、递增／递减、错误控制</td>
</tr>
<tr>
<td align="center">4</td>
<td align="center">无结合</td>
<td align="center">instanceof</td>
<td align="center">类型</td>
</tr>
<tr>
<td align="center">5</td>
<td align="center">从右向左</td>
<td align="center">!</td>
<td align="center">逻辑运算符</td>
</tr>
<tr>
<td align="center">6</td>
<td align="center">从左向右</td>
<td align="center">*、&#x2F;、%</td>
<td align="center">算术运算符</td>
</tr>
<tr>
<td align="center">7</td>
<td align="center">从左向右</td>
<td align="center">+、-、.</td>
<td align="center">算术运算符和字符串运算符</td>
</tr>
<tr>
<td align="center">8</td>
<td align="center">从左向右</td>
<td align="center">&lt;&lt;、&gt;&gt;</td>
<td align="center">位运算符</td>
</tr>
<tr>
<td align="center">9</td>
<td align="center">无结合</td>
<td align="center">&lt;、&lt;&#x3D;、&gt;、&gt;&#x3D;</td>
<td align="center">比较运算符</td>
</tr>
<tr>
<td align="center">10</td>
<td align="center">无结合</td>
<td align="center">&#x3D;&#x3D;、!&#x3D;、&#x3D;&#x3D;&#x3D;、!&#x3D;&#x3D;、&lt;&gt;、&lt;&#x3D;&gt;</td>
<td align="center">比较运算符</td>
</tr>
<tr>
<td align="center">11</td>
<td align="center">从左向右</td>
<td align="center">&amp;</td>
<td align="center">位运算符和引用</td>
</tr>
<tr>
<td align="center">12</td>
<td align="center">从左向右</td>
<td align="center">^</td>
<td align="center">位运算符</td>
</tr>
<tr>
<td align="center">13</td>
<td align="center">从左向右</td>
<td align="center">|</td>
<td align="center">位运算符</td>
</tr>
<tr>
<td align="center">14</td>
<td align="center">从左向右</td>
<td align="center">&amp;&amp;</td>
<td align="center">逻辑运算符</td>
</tr>
<tr>
<td align="center">15</td>
<td align="center">从左向右</td>
<td align="center">||</td>
<td align="center">逻辑运算符</td>
</tr>
<tr>
<td align="center">16</td>
<td align="center">从右向左</td>
<td align="center">??</td>
<td align="center">null 合并运算符</td>
</tr>
<tr>
<td align="center">17</td>
<td align="center">从左向右</td>
<td align="center">? :</td>
<td align="center">三元运算符</td>
</tr>
<tr>
<td align="center">18</td>
<td align="center">从右向左</td>
<td align="center">&#x3D;、+&#x3D;、-&#x3D;、*&#x3D;、**&#x3D;、&#x2F;&#x3D;、.&#x3D;、%&#x3D;、&amp;&#x3D;、|&#x3D;、^&#x3D;、&lt;&lt;&#x3D;、&gt;&gt;&#x3D;</td>
<td align="center">赋值运算符</td>
</tr>
<tr>
<td align="center">19</td>
<td align="center">从左向右</td>
<td align="center">and</td>
<td align="center">逻辑运算符</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">从左向右</td>
<td align="center">xor</td>
<td align="center">逻辑运算符</td>
</tr>
<tr>
<td align="center">21</td>
<td align="center">从左向右</td>
<td align="center">or</td>
<td align="center">逻辑运算符</td>
</tr>
</tbody></table>
<p>如下例所示：&amp;&amp;与||的优先级高于&#x3D;，&#x3D;的优先级高于and与or</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$v0</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v1</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v2</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$v3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$v0</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
   	<span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>在此时，我们只需令v1&#x3D;数字，v0就为true，便可成功绕过。</p>
</li>
<li><p>get与post：http协议默认先以get方式获取数据，无论是否以哪种方式发起的，总是get方式优先，即通过get方式获取到了数据就不会再去通过post方式获取一遍，如果get方式获取不到，再以post方式获取。</p>
</li>
</ul>
<h2 id="10-ReflectionClass反射类"><a href="#10-ReflectionClass反射类" class="headerlink" title="10.ReflectionClass反射类"></a>10.ReflectionClass反射类</h2><p>反射可以帮助我们动态地获取和分析代码的结构和信息。等遇到题目再结合分析。</p>
<h2 id="11-is-numeric-函数"><a href="#11-is-numeric-函数" class="headerlink" title="11.is_numeric()函数"></a>11.is_numeric()函数</h2><p><strong>is_numeric()</strong> 函数用于检测变量是否为数字或数字字符串。语法如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token keyword type-declaration">bool</span> <span class="token function">is_numeric</span> <span class="token punctuation">(</span> <span class="token keyword type-hint">mixed</span> <span class="token variable">$var</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>$var：要检测的变量。</p>
<p>返回值：如果指定的变量是数字和数字字符串则返回 TRUE，否则返回 FALSE。</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token variable">$var_name1</span><span class="token operator">=</span><span class="token number">678</span><span class="token punctuation">;</span>
<span class="token variable">$var_name2</span><span class="token operator">=</span><span class="token string double-quoted-string">"a678"</span><span class="token punctuation">;</span>
<span class="token variable">$var_name3</span><span class="token operator">=</span><span class="token string double-quoted-string">"678"</span><span class="token punctuation">;</span>
<span class="token variable">$var_name4</span><span class="token operator">=</span><span class="token string double-quoted-string">"runoob.com"</span><span class="token punctuation">;</span>
<span class="token variable">$var_name5</span><span class="token operator">=</span><span class="token number">698.99</span><span class="token punctuation">;</span>
<span class="token variable">$var_name6</span><span class="token operator">=</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"a1"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"a2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$var_name7</span><span class="token operator">=</span><span class="token operator">+</span><span class="token number">125689.66</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$var_name1</span></span> 是数字"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">else</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$var_name1</span></span> 不是数字"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span> <span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$var_name2</span></span> 是数字"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span> <span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">else</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">echo</span> <span class="token string double-quoted-string">"<span class="token interpolation"><span class="token variable">$var_name2</span></span> 不是数字"</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span> <span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token variable">$result</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"[ <span class="token interpolation"><span class="token variable">$var_name3</span></span> 是数字吗? ]"</span> <span class="token operator">.</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"[ <span class="token interpolation"><span class="token variable">$var_name4</span></span> 是数字吗? ]"</span> <span class="token operator">.</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"[ <span class="token interpolation"><span class="token variable">$var_name5</span></span> 是数字吗? ]"</span> <span class="token operator">.</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"[ <span class="token interpolation"><span class="token variable">$var_name6</span></span> 是数字吗? ]"</span> <span class="token operator">.</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token operator">=</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$var_name7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token string double-quoted-string">"[ <span class="token interpolation"><span class="token variable">$var_name7</span></span> 是数字吗? ]"</span> <span class="token operator">.</span><span class="token function">var_dump</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>结果如下：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token number">678</span> 是数字
a678 不是数字
<span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token number">678</span> 是数字吗<span class="token operator">?</span> <span class="token punctuation">]</span>
<span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> runoob<span class="token operator">.</span>com 是数字吗<span class="token operator">?</span> <span class="token punctuation">]</span>
<span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token number">698.99</span> 是数字吗<span class="token operator">?</span> <span class="token punctuation">]</span>
<span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token keyword type-declaration">Array</span> 是数字吗<span class="token operator">?</span> <span class="token punctuation">]</span>
<span class="token keyword type-declaration">bool</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> <span class="token number">125689.66</span> 是数字吗<span class="token operator">?</span> <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这个函数和mysql结合起来就容易出问题，那是因为is_numeric判断的时候，当碰到16进制数的时候，也会判断成数字，is_numeric函数对于空字符%00，无论是%00放在前后都可以判断为非数值，而%20空格字符只能放在数值后。所以，查看函数发现该函数对对于第一个空格字符会跳过空格字符判断，接着后面的判断。在部分情况时，在数字后边接%00也可以成功绕过。</p>
<h2 id="12-call-user-func回调函数"><a href="#12-call-user-func回调函数" class="headerlink" title="12.call_user_func回调函数"></a>12.call_user_func回调函数</h2><p>call_user_func — 把第一个参数作为回调函数调用；回调函数：指的是一个函数作为参数传递给另一个函数，并且可以在后者中被调用执行的函数。语法如下：</p>
<p>call_user_func(<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.callable.php">callable</a> <code>$callback</code>, <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed">mixed</a> <code>...$args</code>): <a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed">mixed</a></p>
<p>参数解释：</p>
<ul>
<li><p><code>callback</code> 是被调用的回调函数，其余参数是回调函数的参数。</p>
</li>
<li><p>callback：将被调用的回调函数（<a target="_blank" rel="noopener" href="https://www.php.net/manual/zh/language.types.callable.php">callable</a>）</p>
</li>
<li><p>args：0个或以上的参数，被传入回调函数</p>
</li>
</ul>
<p>如下例，此函数提供了一种特殊的函数调用方法：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">function</span> <span class="token function-definition function">nowamagic</span><span class="token punctuation">(</span><span class="token variable">$a</span><span class="token punctuation">,</span><span class="token variable">$b</span><span class="token punctuation">)</span>   
<span class="token punctuation">&#123;</span>   
    <span class="token keyword">echo</span> <span class="token variable">$a</span><span class="token punctuation">;</span>   
    <span class="token keyword">echo</span> <span class="token variable">$b</span><span class="token punctuation">;</span>   
<span class="token punctuation">&#125;</span>   
<span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'nowamagic'</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"111"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'nowamagic'</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"333"</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"444"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token comment">//显示 111 222 333 444   </span>
<span class="token delimiter important">?></span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>调用类内部时，用的是array：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">a</span> <span class="token punctuation">&#123;</span>   
    <span class="token keyword">function</span> <span class="token function-definition function">b</span><span class="token punctuation">(</span><span class="token variable">$c</span><span class="token punctuation">)</span>   
    <span class="token punctuation">&#123;</span>   
        <span class="token keyword">echo</span> <span class="token variable">$c</span><span class="token punctuation">;</span>   
    <span class="token punctuation">&#125;</span>   
<span class="token punctuation">&#125;</span>   
<span class="token function">call_user_func</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">"a"</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">"111"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token comment">//显示 111   </span>
<span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="13-php伪协议"><a href="#13-php伪协议" class="headerlink" title="13.php伪协议"></a>13.php伪协议</h2><p>对于php伪协议的详细介绍见<a target="_blank" rel="noopener" href="https://621779.github.io/2023/07/16/RCE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">RCE学习笔记 </a></p>
<p><strong>常见用法</strong></p>
<ol>
<li><p>写文件：</p>
<p>在有file_put_contents(v 3 , v3,v3,str)函数的帮助下，我们可以通过下面这句代码直接写入木马到某文件：</p>
<p><code>v3=php://filter/write=convert.base64-decode/resource=1.php&amp;str=......</code></p>
</li>
<li><p>读文件：</p>
<p>读文件跟写入大致相同，但不需要额外写入write，大致语法如下：</p>
<p><code>php://filter/convert.base64-decode/resource=想读取的文件名</code></p>
<p>部分情况会遇到过滤，看情况绕过即可，对于该协议的详细介绍，见开头的连接文章。</p>
</li>
</ol>
<h2 id="14-is-file-函数"><a href="#14-is-file-函数" class="headerlink" title="14.is_file()函数"></a>14.is_file()函数</h2><p>is_file() 函数检查指定的文件名是否是正常的文件。语法：<code>is_file(file)</code></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>file</em></td>
<td align="left">必需。规定要检查的文件。</td>
</tr>
</tbody></table>
<p>该变量可以为伪协议。</p>
<p>返回值：如果文件存在且为正常的文件，则返回 true。</p>
<p><strong>伪协议绕过</strong></p>
<p>highlight_file()可以识别php伪协议 is_file()不能识别php伪协议，所以我们可以通过为协议来绕过。</p>
<p><strong>目录溢出绕过</strong></p>
<p>在linux中&#x2F;proc&#x2F;self&#x2F;root是指向根目录的 也就是如果在命令行中输入 ls &#x2F;proc&#x2F;self&#x2F;root，其实显示的内容是根目录下的内容 多次重复后绕过is_file。</p>
<pre class="line-numbers language-none"><code class="language-none">file&#x3D;&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="15-parse-str-函数"><a href="#15-parse-str-函数" class="headerlink" title="15.parse_str()函数"></a>15.parse_str()函数</h2><p>把查询字符串解析到变量中,如下例：</p>
<p>有一个url：<code>http://example.com/page.php?name=John&amp;age=25</code>，利用此函数我们便可以将此url当中的变量分开：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token variable">$queryString</span> <span class="token operator">=</span> <span class="token string double-quoted-string">"name=John&amp;age=25"</span><span class="token punctuation">;</span>
<span class="token function">parse_str</span><span class="token punctuation">(</span><span class="token variable">$queryString</span><span class="token punctuation">,</span> <span class="token variable">$output</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$output</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 输出：John</span>
<span class="token keyword">echo</span> <span class="token variable">$output</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 输出：25</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>语法：<code>parse_str(string,array)</code></p>
<p>变量解释：</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>string</em></td>
<td align="left">必需。规定要解析的字符串。</td>
</tr>
<tr>
<td align="left"><em>array</em></td>
<td align="left">可选。规定存储变量的数组的名称。该参数指示变量将被存储到数组中。</td>
</tr>
</tbody></table>
<p><strong>注意</strong>：如果未设置 <em>array</em> 参数，则由该函数设置的变量将覆盖已存在的同名变量。php.ini 文件中的 magic_quotes_gpc 设置影响该函数的输出。如果已启用，那么在 parse_str() 解析之前，变量会被 addslashes() 转换。且若要post参数，需加引号。</p>
<p><strong>变量覆盖漏洞</strong></p>
<p>parse_str() 函数用于把查询字符串解析到变量中，如果没有array 参数，则由该函数设置的变量将覆盖已存在的同名变量。 极度不建议 在没有 array参数的情况下使用此函数，并且在 PHP 7.2 中将废弃不设置参数的行为。此函数没有返回值</p>

      </section>

      
      
        <nav class="article-nav">
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/2023/07/16/hello/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">hello</h2>
        </a>
      
      <div class="card-text--row">Newer</div>
    </div>
  </article>
</div>
          
          
            <div class="article-nav-item layout-padding">
  <article class="card-container article-nav-card content-padding--primary soft-size--large soft-style--box">
    
    <div class="card-text">
      
        <a href="/2023/07/16/sql%E6%B3%A8%E5%85%A5%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">
          <h2 class="card-text--title text-ellipsis">sql注入学习笔记</h2>
        </a>
      
      <div class="card-text--row">Older</div>
    </div>
  </article>
</div>
          
        </nav>
      

      <section class="page-message-container layout-padding">
        


  
  

  
  


      </section>
    </div>
    <div class="widget-info">
      <section class="widget-author widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-body">
    
      <img src="https://s.gravatar.com/avatar/2d6b803eea37de0257620d5fabee7e64?s=200&amp;r=g&amp;d=retro" class="soft-size--round soft-style--box" alt="Creeper">
    
    
      <h2>Creeper</h2>
    
    
      <p>贵在坚持</p>
    

    <div class="count-box">
      <div class="count-box--item">
        <svg class="icon icon-article" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M240.51564747 647.74217627h196.07203239c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806V165.10332731c0-33.18142087-30.16492806-60.32985613-60.32985612-60.32985611H245.04038668C225.43318342 104.7734712 210.35071939 119.85593522 210.35071939 139.46313845V617.57724821c0 16.59071043 13.57421762 30.16492806 30.16492808 30.16492806z m663.62841731-452.47392089v482.63884894c0 33.18142087-27.14843525 60.32985613-60.32985612 60.32985613H180.18579134c-33.18142087 0-60.32985613-27.14843525-60.32985612-60.32985613V195.26825538c-49.77213131 0-90.49478418 40.72265287-90.49478417 90.49478417v452.4739209c0 49.77213131 40.72265287 90.49478418 90.49478417 90.49478417h286.56681657c16.59071043 0 30.16492806 13.57421762 30.16492807 30.16492807s13.57421762 30.16492806 30.16492805 30.16492806h90.49478418c16.59071043 0 30.16492806-13.57421762 30.16492805-30.16492806s13.57421762-30.16492806 30.16492807-30.16492807h286.56681657c49.77213131 0 90.49478418-40.72265287 90.49478417-90.49478417V285.76303955c0-49.77213131-40.72265287-90.49478418-90.49478417-90.49478417zM587.41232014 647.74217627h191.54729318c19.60720323 0 34.68966726-15.08246403 34.68966729-34.68966727V134.93839925c0-16.59071043-13.57421762-30.16492806-30.16492808-30.16492805H617.57724821c-30.16492806 0-60.32985613 27.14843525-60.32985612 60.32985611v452.4739209c0 16.59071043 13.57421762 30.16492806 30.16492805 30.16492806z" fill="currentColor"></path>
</svg>
        <span>7</span>
      </div>
      <div class="count-box--item">
        <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
        0
      </div>
      <div class="count-box--item">
        <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
        1
      </div>
    </div>
  </div>
</section>

      

      
<section class="widet-notice widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-notice" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M512 945.02305225v28.15620663a24.27259221 24.27259221 0 0 1-24.27259221 24.27259335H394.0352a48.54518557 48.54518557 0 0 1-41.74885888-23.78714112l-110.68302222-184.47170332a132.04290333 132.04290333 0 0 1-17.47626667-48.54518557h118.4502511a200.97706667 200.97706667 0 0 1 76.21594113 14.56355556l20.38897777 133.49925888a48.54518557 48.54518557 0 0 0 36.40888888 27.67075555l16.01991111 2.91271112a24.27259221 24.27259221 0 0 1 20.38897778 25.72894889zM997.45185223 463.45481443a194.18074112 194.18074112 0 0 1-38.8361489 116.50844445 24.75804445 24.75804445 0 0 1-36.4088889 0l-34.95253333-34.95253333a24.27259221 24.27259221 0 0 1-2.91271111-30.58346667 97.09036999 97.09036999 0 0 0 0-106.79940665 24.27259221 24.27259221 0 0 1 2.91271111-30.58346666l34.95253333-34.95253334a24.75804445 24.75804445 0 0 1 18.93262223-7.28177777 26.2144 26.2144 0 0 1 17.47626667 9.70903665A194.18074112 194.18074112 0 0 1 997.45185223 463.45481443z m-194.18074112-388.36148111v776.72296335a48.54518557 48.54518557 0 0 1-48.54518556 48.54518443h-28.64165888a48.54518557 48.54518557 0 0 1-33.98163001-14.07810332l-145.63555556-143.20829668A291.27111111 291.27111111 0 0 0 342.57730333 657.63555556H172.18370333a145.63555556 145.63555556 0 0 1-145.63555556-145.63555556v-97.09036999a145.63555556 145.63555556 0 0 1 145.63555556-145.63555556h170.3936a291.27111111 291.27111111 0 0 0 206.31703779-85.43952668l145.63555555-143.20829554a48.54518557 48.54518557 0 0 1 33.98162888-14.07810446H754.72592555a48.54518557 48.54518557 0 0 1 48.54518556 48.54518555z" fill="currentColor"></path>
</svg>
    <span>NOTICE</span>
  </div>
  <div class="widget-body">
    <p>我可以孑然一身，但不能心无所属。</p>
  </div>
</section>


      <section class="widget-categorys widget-item layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-categories" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M900.3614811 257.09082106h-339.81629553l-67.96326003-101.9448889c-19.41807444-29.12711113-48.54518557-43.69066667-82.52681443-43.69066667H123.6385189c-53.39970333 0-97.09036999 43.69066667-97.09037113 97.09036999v582.54222222c0 53.39970333 43.69066667 97.09036999 97.09037113 97.09037002h776.7229622c53.39970333 0 97.09036999-43.69066667 97.09037113-97.09037002V354.18119104c0-53.39970333-43.69066667-97.09036999-97.09037113-97.09036998z m-97.09036999 242.72592554H220.72888889c-24.27259221 0-48.54518557-24.27259221-48.54518556-48.54518556s24.27259221-48.54518557 48.54518556-48.54518444h582.54222222c24.27259221 0 48.54518557 24.27259221 48.54518556 48.54518444s-24.27259221 48.54518557-48.54518556 48.54518556z" fill="currentColor"></path>
</svg>
    <span>CATEGORYS</span>
  </div>
  <div class="widget-body">
    <ul class="categorys-list">
      
    </ul>
  </div>
</section>

      <section class="widget-tags widget-item  layout-margin content-padding--primary soft-size--large soft-style--box">
  <div class="widget-title">
    <svg class="icon icon-tags" viewBox="0 0 1098 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M283.42180005 272q0-28.38857157-20.09142843-48.48000001t-48.47999998-20.09142842-48.48000002 20.09142842-20.09142846 48.48000001 20.09142846 48.48 48.48000002 20.09142843 48.47999998-20.09142843 20.09142843-48.48zM855.0332285 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.03999997 263.58857157q-20.9142853 19.81714313-48.75428534 19.81714312-28.38857157 0-48.20571468-19.81714312l-383.04-383.58857157q-20.36571468-19.81714313-34.55999999-54.10285688t-14.19428534-62.6742853l0-222.85714313q0-27.84000002 20.36571469-48.20571469t48.2057147-20.36571466l222.85714313 0q28.38857157 0 62.6742853 14.19428529t54.65142842 34.55999999l383.04000001 382.49142843q19.81714313 20.9142853 19.81714314 48.75428532zM1060.74751475 580.57142843q0 28.38857157-19.81714313 48.2057147l-263.04 263.58857157q-20.9142853 19.81714313-48.75428531 19.81714312-19.26857155 0-31.61142843-7.47428531t-28.38857159-24.13714314l251.79428534-251.7942853q19.81714313-19.81714313 19.81714308-48.20571469 0-27.84000002-19.81714308-48.75428531l-383.04000001-382.49142845q-20.36571468-20.36571468-54.65142842-34.55999999t-62.67428532-14.19428534l120 0q28.38857157 0 62.67428532 14.19428534t54.65142842 34.55999999l383.03999998 382.49142845q19.81714313 20.9142853 19.81714314 48.75428531z" fill="currentColor"></path>
</svg>
    <span>TAGS</span>
  </div>
  <div class="widget-body">
    <div class="tags-cloud">
      <a href="/tags/web%E5%AE%89%E5%85%A8/" style="font-size: 10px;" class="tags-cloud-0">web安全</a>
    </div>
  </div>
</section>
    </div>
  </article>
</div>

    <!-- footer container -->
<footer id="footer" class="footer">
  <div class="footer-container">
    
    <div class="social-icons">
      
        
      
        
      
        
      
        
          <a href="https://github.com/621779/" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
</svg>
          </a>
        
      
        
          <a href="https://twitter.com/guanquanhong" class="soft-size--primary soft-style--box" target="_blank" rel="noopener noreferrer">
            <svg class="icon icon-twitter" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M962.285714 233.142857q-38.285714 56-92.571429 95.428571 0.571429 8 0.571429 24 0 74.285714-21.714286 148.285714t-66 142-105.428571 120.285714-147.428571 83.428571-184.571429 31.142857q-154.857143 0-283.428571-82.857143 20 2.285714 44.571429 2.285714 128.571429 0 229.142857-78.857143-60-1.142857-107.428571-36.857143t-65.142857-91.142857q18.857143 2.857143 34.857143 2.857143 24.571429 0 48.571429-6.285714-64-13.142857-106-63.714286t-42-117.428571l0-2.285714q38.857143 21.714286 83.428571 23.428571-37.714286-25.142857-60-65.714286t-22.285714-88q0-50.285714 25.142857-93.142857 69.142857 85.142857 168.285714 136.285714t212.285714 56.857143q-4.571429-21.714286-4.571429-42.285714 0-76.571429 54-130.571429t130.571429-54q80 0 134.857143 58.285714 62.285714-12 117.142857-44.571429-21.142857 65.714286-81.142857 101.714286 53.142857-5.714286 106.285714-28.571429z"></path>
</svg>
          </a>
        
      
    </div>
     
    <p>&copy; 2023 <a href="/" target="_blank">阿巴</a></p>

    

    <p>Powered by <a href="https://hexo.io" target="_blank" rel="noopener noreferrer">Hexo</a> Theme - <a href="https://github.com/miiiku/flex-block" target="_blank" rel="noopener noreferrer author">flex-block</a></p>

    <p>
      <a href="javascript:;" id="theme-light">🌞 浅色</a>
      <a href="javascript:;" id="theme-dark">🌛 深色</a>
      <a href="javascript:;" id="theme-auto">🤖️ 自动</a>
    </p>
  </div>
</footer>
  </div>

  <div class="back-to-top-fixed soft-size--round soft-style--box">
    <svg class="icon icon-back-to-top" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <path d="M725.333333 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8l-213.333333-213.333333c-17.066667-17.066667-17.066667-42.666667 0-59.733333s42.666667-17.066667 59.733333 0l213.333333 213.333333c17.066667 17.066667 17.066667 42.666667 0 59.733333C746.666667 422.4 738.133333 426.666667 725.333333 426.666667z"></path>
      <path d="M298.666667 426.666667c-12.8 0-21.333333-4.266667-29.866667-12.8-17.066667-17.066667-17.066667-42.666667 0-59.733333l213.333333-213.333333c17.066667-17.066667 42.666667-17.066667 59.733333 0s17.066667 42.666667 0 59.733333l-213.333333 213.333333C320 422.4 311.466667 426.666667 298.666667 426.666667z"></path>
      <path d="M512 896c-25.6 0-42.666667-17.066667-42.666667-42.666667L469.333333 170.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 682.666667C554.666667 878.933333 537.6 896 512 896z"></path>
    </svg>
  </div>

  
  <!-- aplayer -->


<!-- dplayer -->




  


  


  




<script src="/js/script.js"></script>


  
  <!-- 尾部用户自定义相关内容 -->
</body>
</html>
